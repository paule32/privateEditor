unit C64ConfigFrame;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms, 
  Dialogs, StdCtrls, CheckLst, ExtCtrls, Grids, ValEdit, ImgList,
  JvExStdCtrls, JvListBox, TntStdCtrls;

type
  TFrame5 = class(TFrame)
    Label1: TLabel;
    Splitter1: TSplitter;
    Label2: TLabel;
    ListBox1: TCheckListBox;
    Label3: TLabel;
    Label4: TLabel;
    Panel1: TPanel;
    Panel2: TPanel;
    Splitter2: TSplitter;
    ValueListEditor1: TValueListEditor;
    ImageList1: TImageList;
    ListBox2: TTntListBox;
    procedure ListBox1ClickCheck(Sender: TObject);
    procedure ListBox1Click(Sender: TObject);
    procedure ListBox2MeasureItem(Control: TWinControl; Index: Integer;
      var Height: Integer);
    procedure ListBox2DrawItem(Control: TWinControl; Index: Integer;
      Rect: TRect; State: TOwnerDrawState);
  private
    MemBitmap: TBitmap;
  public
    { Public declarations }
  end;

implementation

{$R *.dfm}

procedure TFrame5.ListBox1ClickCheck(Sender: TObject);
var
  I,C: Integer;
begin
  C := ListBox1.ItemIndex;

  for I := 0 to ListBox1.Count - 1 do
  ListBox1.Checked[I] := false;
  ListBox1.Checked[C] := true;
end;

procedure TFrame5.ListBox1Click(Sender: TObject);
begin
  ListBox1ClickCheck(Sender);
end;

procedure TFrame5.ListBox2MeasureItem(Control: TWinControl; Index: Integer;
  var Height: Integer);
begin
  Height := ImageList1.Height + 4;
end;

procedure TFrame5.ListBox2DrawItem(
  Control: TWinControl;
  Index  : Integer;
  Rect   : TRect;
  State  : TOwnerDrawState);
  var
  I,J : Word;
  lb: TtntListBox;
  b1,b2: Byte;
  wn: Word;
  ws: WideString;
begin
  lb := (Control as TtntListBox);

  lb.Canvas.Font.Name  := 'C64 Elite Mono';
  lb.Canvas.Font.Size  := 14;
  lb.Canvas.Font.Color := clBlack;

  lb.Canvas.Brush.Color := clWhite;
  lb.Canvas.FillRect(rect);
  lb.Canvas.Brush.Color := clYellow;

  //if (I >= 992) and (I <= 3351) then for J := 3351 downto 992 do DFrameC64Config.ListBox2.Items.Delete(J);
  //if (I >= 864) and (I <=  895) then for J :=  895 downto 864 do DFrameC64Config.ListBox2.Items.Delete(J);
  //if (I >= 736) and (I <=  767) then for J :=  767 downto 736 do DFrameC64Config.ListBox2.Items.Delete(J);
  //if (I >= 608) and (I <=  639) then for J :=  639 downto 608 do DFrameC64Config.ListBox2.Items.Delete(J);
  //if (I >= 480) and (I <=  511) then for J :=  511 downto 480 do DFrameC64Config.ListBox2.Items.Delete(J);
  //if (I >= 352) and (I <=  383) then for J :=  383 downto 352 do DFrameC64Config.ListBox2.Items.Delete(J);
  //if (I >= 224) and (I <=  255) then for J :=  255 downto 224 do DFrameC64Config.ListBox2.Items.Delete(J);
  if (Index >=  96) and (Index <=  127) then
  begin
    for J := 96 to 127 do
    ListBox2.Items.Delete(J);
    exit;
  end;

  ws := WideChar(Word($E020 + Index));
        Windows.TextOutW(
        lb.Canvas.Handle,
        rect.Left + 2,
        rect.Top  + 5,
        PWideChar(ws),
        Length(ws));

  lb.Canvas.Brush.Color := clWhite;
  lb.Canvas.TextOut(
        rect.Left + 40,
        rect.Top  + 2,
        'key ' + IntToStr(Index));
end;

end.
